{"is_source_file": true, "format": "JavaScript", "description": "This file provides data access services backed by Supabase for user ratings, lists, and optionally user progress in a media tracking application. It exports services for loading, adding, removing, and updating user-specific information related to media items such as manga and anime.", "external_files": ["../supabaseClient"], "external_methods": ["getSupabase", "tableExists"], "published": ["RatingsService", "ListsService", "ProgressService"], "classes": [], "methods": [{"name": "loadAll()", "description": "Retrieves all ratings for the current user, returning a map of media_id to rating.", "scope": "RatingsService", "scopeKind": "class"}, {"name": "upsert({ media_id, media_type, rating })", "description": "Inserts or updates a rating for a media item, identified by media_id and media_type.", "scope": "RatingsService", "scopeKind": "class"}, {"name": "remove({ media_id, media_type })", "description": "Deletes a rating for a specified media item.", "scope": "RatingsService", "scopeKind": "class"}, {"name": "loadList(list_name)", "description": "Loads a list of media items by list name for the current user.", "scope": "ListsService", "scopeKind": "class"}, {"name": "add({ media_id, media_type, list_name })", "description": "Adds a media item to a specified list for the current user.", "scope": "ListsService", "scopeKind": "class"}, {"name": "remove({ media_id, media_type, list_name })", "description": "Removes a media item from a specified list.", "scope": "ListsService", "scopeKind": "class"}, {"name": "isAvailable()", "description": "Checks if the progress feature is enabled via environment flag and if the progress table exists.", "scope": "ProgressService", "scopeKind": "class"}, {"name": "get", "description": "Retrieves the last progress record for a media item."}, {"name": "upsert", "description": "Inserts or updates progress data (like chapter or episode number) for a media item."}], "calls": ["getSupabase", "tableExists", "supabase.from", "supabase.select", "supabase.upsert", "supabase.delete", "supabase.eq", "supabase.insert"], "search-terms": ["supabaseData", "user_ratings", "user_lists", "user_progress", "RatingsService", "ListsService", "ProgressService", "supabaseClient"], "state": 2, "file_id": 28, "knowledge_revision": 224, "git_revision": "dfe56c4a10e003bc049a0e5e197893cb2cc2556f", "revision_history": [{"65": ""}, {"110": "3d1e11a45db83364aa2658e61d900eb0df9549f7"}, {"111": "3d1e11a45db83364aa2658e61d900eb0df9549f7"}, {"148": "3d1e11a45db83364aa2658e61d900eb0df9549f7"}, {"222": "dfe56c4a10e003bc049a0e5e197893cb2cc2556f"}, {"223": "dfe56c4a10e003bc049a0e5e197893cb2cc2556f"}, {"224": "dfe56c4a10e003bc049a0e5e197893cb2cc2556f"}], "ctags": [{"_type": "tag", "name": "ListsService", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^export const ListsService = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "ProgressService", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^export const ProgressService = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "RatingsService", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^export const RatingsService = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "TABLE_LISTS", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^const TABLE_LISTS = 'user_lists';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "TABLE_PROGRESS", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^const TABLE_PROGRESS = 'user_progress';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "TABLE_RATINGS", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^const TABLE_RATINGS = 'user_ratings';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "add", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^  async add({ media_id, media_type, list_name }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ media_id, media_type, list_name })", "scope": "ListsService", "scopeKind": "class"}, {"_type": "tag", "name": "isAvailable", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^  async isAvailable() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "ProgressService", "scopeKind": "class"}, {"_type": "tag", "name": "loadAll", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^  async loadAll() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "RatingsService", "scopeKind": "class"}, {"_type": "tag", "name": "loadList", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^  async loadList(list_name) {$/", "language": "JavaScript", "kind": "method", "signature": "(list_name)", "scope": "ListsService", "scopeKind": "class"}, {"_type": "tag", "name": "media_id", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^      media_id,$/", "language": "JavaScript", "kind": "field", "scope": "RatingsService.upsert.payload", "scopeKind": "class"}, {"_type": "tag", "name": "remove", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^  async remove({ media_id, media_type }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ media_id, media_type })", "scope": "RatingsService", "scopeKind": "class"}, {"_type": "tag", "name": "remove", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^  async remove({ media_id, media_type, list_name }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ media_id, media_type, list_name })", "scope": "ListsService", "scopeKind": "class"}, {"_type": "tag", "name": "sb", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^    const sb = getSupabase();$/", "language": "JavaScript", "kind": "constant", "scope": "ProgressService", "scopeKind": "class"}, {"_type": "tag", "name": "upsert", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^  async upsert({ media_id, media_type, rating }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ media_id, media_type, rating })", "scope": "RatingsService", "scopeKind": "class"}], "hash": "0873c4e5b3f1b5ba8587e3ecd76fd85f", "format-version": 4, "code-base-name": "koma_corner_frontend", "filename": "koma_corner_frontend/src/services/supabaseData.js", "fields": [{"name": "media_id,", "scope": "RatingsService.upsert.payload", "scopeKind": "class", "description": "unavailable"}]}