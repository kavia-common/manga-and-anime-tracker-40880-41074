{"is_source_file": true, "format": "JavaScript", "description": "Source file for a catalog service in a manga and anime tracker project. It provides functions to fetch and map media data from a GraphQL API, including trending media, search results, media details, and recommendations, with fallback to mock data. It also includes utility functions for filtering and normalizing data.", "external_files": ["./mock_catalog.json", "./graphql"], "external_methods": ["graphQLFetch"], "published": ["CatalogAPI"], "classes": [], "methods": [{"name": "mapMediaListItem(m)", "description": "Maps a raw media item object from the API to the internal UI shape.", "scope": "", "scopeKind": ""}, {"name": "mapMediaDetail(m)", "description": "Maps a detailed media object from the API, extending media list item mapping.", "scope": "", "scopeKind": ""}, {"name": "stripHTML(s)", "description": "Removes HTML tags from a string.", "scope": "", "scopeKind": ""}, {"name": "clientFilter(list, { status, genres, type })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getById(id)", "scope": "CatalogAPI", "scopeKind": "class", "description": "unavailable"}, {"name": "getMediaDetails(id)", "scope": "CatalogAPI", "scopeKind": "class", "description": "unavailable"}, {"name": "getMinimalByIds(ids = [])", "scope": "CatalogAPI", "scopeKind": "class", "description": "unavailable"}, {"name": "getRecommendations(id, { page = 1, perPage = 10 } = {})", "scope": "CatalogAPI", "scopeKind": "class", "description": "unavailable"}, {"name": "getTrendingMedia({ type = 'ANIME', page = 1, perPage = DEFAULT_PER_PAGE, status, genres } = {})", "scope": "CatalogAPI", "scopeKind": "class", "description": "unavailable"}, {"name": "list()", "scope": "CatalogAPI", "scopeKind": "class", "description": "unavailable"}, {"name": "normalizeGenres(genres)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "normalizeStatus(status)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "searchMedia({ query, type = 'ANIME', page = 1, perPage = DEFAULT_PER_PAGE, status, genres } = {})", "scope": "CatalogAPI", "scopeKind": "class", "description": "unavailable"}], "calls": ["graphQLFetch", "mock", "mapMediaListItem", "mapMediaDetail", "normalizeStatus", "normalizeGenres", "clientFilter"], "search-terms": ["catalog", "Anime", "Manga", "media", "GraphQL", "mock_catalog", "media filtering"], "state": 2, "file_id": 22, "knowledge_revision": 157, "git_revision": "450731cbf9f707e069adc04cb9a45562bbe9bd3e", "revision_history": [{"47": ""}, {"77": "fc7765b72c2626febba7a708fd6500363cff79b7"}, {"157": "450731cbf9f707e069adc04cb9a45562bbe9bd3e"}], "ctags": [{"_type": "tag", "name": "CatalogAPI", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^export const CatalogAPI = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "DEFAULT_PER_PAGE", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^const DEFAULT_PER_PAGE = Number(process.env.REACT_APP_PAGE_SIZE) || 30;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "DETAILS_FIELDS", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^const DETAILS_FIELDS = `$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "LIST_FIELDS", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^const LIST_FIELDS = `$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "QUERY_BATCH_MIN", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^const QUERY_BATCH_MIN = `$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "QUERY_DETAILS", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^const QUERY_DETAILS = `$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "QUERY_RECOMMENDATIONS", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^const QUERY_RECOMMENDATIONS = `$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "QUERY_SEARCH", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^const QUERY_SEARCH = `$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "QUERY_TRENDING", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^const QUERY_TRENDING = `$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "clientFilter", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^function clientFilter(list, { status, genres, type }) {$/", "language": "JavaScript", "kind": "function", "signature": "(list, { status, genres, type })"}, {"_type": "tag", "name": "getById", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^  async getById(id) {$/", "language": "JavaScript", "kind": "method", "signature": "(id)", "scope": "CatalogAPI", "scopeKind": "class"}, {"_type": "tag", "name": "getMediaDetails", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^  async getMediaDetails(id) {$/", "language": "JavaScript", "kind": "method", "signature": "(id)", "scope": "CatalogAPI", "scopeKind": "class"}, {"_type": "tag", "name": "getMinimalByIds", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^  async getMinimalByIds(ids = []) {$/", "language": "JavaScript", "kind": "method", "signature": "(ids = [])", "scope": "CatalogAPI", "scopeKind": "class"}, {"_type": "tag", "name": "getRecommendations", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^  async getRecommendations(id, { page = 1, perPage = 10 } = {}) {$/", "language": "JavaScript", "kind": "method", "signature": "(id, { page = 1, perPage = 10 } = {})", "scope": "CatalogAPI", "scopeKind": "class"}, {"_type": "tag", "name": "getTrendingMedia", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^  async getTrendingMedia({ type = 'ANIME', page = 1, perPage = DEFAULT_PER_PAGE, status, genres /", "language": "JavaScript", "kind": "method", "signature": "({ type = 'ANIME', page = 1, perPage = DEFAULT_PER_PAGE, status, genres } = {})", "scope": "CatalogAPI", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^  async list() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "CatalogAPI", "scopeKind": "class"}, {"_type": "tag", "name": "mapMediaDetail", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^function mapMediaDetail(m) {$/", "language": "JavaScript", "kind": "function", "signature": "(m)"}, {"_type": "tag", "name": "mapMediaListItem", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^function mapMediaListItem(m) {$/", "language": "JavaScript", "kind": "function", "signature": "(m)"}, {"_type": "tag", "name": "normalizeGenres", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^function normalizeGenres(genres) {$/", "language": "JavaScript", "kind": "function", "signature": "(genres)"}, {"_type": "tag", "name": "normalizeStatus", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^function normalizeStatus(status) {$/", "language": "JavaScript", "kind": "function", "signature": "(status)"}, {"_type": "tag", "name": "query", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^      const vars = { query: q, type, page, perPage, status: normalizeStatus(status), genres: nor/", "language": "JavaScript", "kind": "property", "scope": "CatalogAPI.searchMedia.vars", "scopeKind": "class"}, {"_type": "tag", "name": "searchMedia", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^  async searchMedia({ query, type = 'ANIME', page = 1, perPage = DEFAULT_PER_PAGE, status, genre/", "language": "JavaScript", "kind": "method", "signature": "({ query, type = 'ANIME', page = 1, perPage = DEFAULT_PER_PAGE, status, genres } = {})", "scope": "CatalogAPI", "scopeKind": "class"}, {"_type": "tag", "name": "stripHTML", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^function stripHTML(s) {$/", "language": "JavaScript", "kind": "function", "signature": "(s)"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^      const vars = { query: q, type, page, perPage, status: normalizeStatus(status), genres: nor/", "language": "JavaScript", "kind": "field", "scope": "CatalogAPI.searchMedia.vars", "scopeKind": "class"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^      const vars = { type, page, perPage, status: normalizeStatus(status), genres: normalizeGenr/", "language": "JavaScript", "kind": "field", "scope": "CatalogAPI.getTrendingMedia.vars", "scopeKind": "class"}, {"_type": "tag", "name": "vars", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/catalog.js", "pattern": "/^      const vars = { query: q, type, page, perPage, status: normalizeStatus(status), genres: nor/", "language": "JavaScript", "kind": "class", "scope": "CatalogAPI.searchMedia", "scopeKind": "class"}], "hash": "dfa9c42ebe75892f10c793b99e49ecc6", "format-version": 4, "code-base-name": "koma_corner_frontend", "filename": "koma_corner_frontend/src/services/catalog.js", "fields": [{"name": "const vars = { query: q, type, page, perPage, status: normalizeStatus(status), genres: nor/", "scope": "CatalogAPI.searchMedia.vars", "scopeKind": "class", "description": "unavailable"}, {"name": "const vars = { type, page, perPage, status: normalizeStatus(status), genres: normalizeGenr/", "scope": "CatalogAPI.getTrendingMedia.vars", "scopeKind": "class", "description": "unavailable"}]}