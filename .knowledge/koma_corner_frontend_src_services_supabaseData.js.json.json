{"is_source_file": true, "format": "JavaScript", "description": "This file provides data access services backed by Supabase for user ratings, lists, and progress tracking within a manga and anime tracking application. It includes functions for loading, adding, updating, and removing ratings and lists, as well as optional progress management contingent on feature flags and table existence.", "external_files": ["../supabaseClient"], "external_methods": ["getSupabase", "tableExists"], "published": ["RatingsService", "ListsService", "ProgressService"], "classes": [], "methods": [{"name": "add({ media_id, media_type, list_name })", "scope": "ListsService", "scopeKind": "class", "description": "unavailable"}, {"name": "formatSbError(prefix, error, extra = {})", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "getCurrentUserId()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "isAvailable()", "scope": "ProgressService", "scopeKind": "class", "description": "unavailable"}, {"name": "loadAll()", "scope": "RatingsService", "scopeKind": "class", "description": "unavailable"}, {"name": "loadList(list_name)", "scope": "ListsService", "scopeKind": "class", "description": "unavailable"}, {"name": "remove({ media_id, media_type })", "scope": "RatingsService", "scopeKind": "class", "description": "unavailable"}, {"name": "remove({ media_id, media_type, list_name })", "scope": "ListsService", "scopeKind": "class", "description": "unavailable"}, {"name": "upsert({ media_id, media_type, rating })", "scope": "RatingsService", "scopeKind": "class", "description": "unavailable"}], "calls": ["getSupabase", "tableExists", "supabase.auth.getUser", "supabase.from", "supabase.auth.getUser", "supabase.from", "supabase.from", "supabase.from", "supabase.from", "supabase.from", "supabase.from", "supabase.from", "supabase.from", "supabase.from", "supabase.from", "supabase.from", "supabase.from"], "search-terms": ["supabaseData", "user_ratings", "user_lists", "user_progress", "loadAllRatings", "upsertRating", "deleteRating", "loadList", "addToList", "removeFromList", "progressAvailability", "getProgress", "upsertProgress"], "state": 2, "file_id": 28, "knowledge_revision": 228, "git_revision": "013958c3839e7bd81946e2127686dd2b75f84729", "revision_history": [{"65": ""}, {"110": "3d1e11a45db83364aa2658e61d900eb0df9549f7"}, {"111": "3d1e11a45db83364aa2658e61d900eb0df9549f7"}, {"148": "3d1e11a45db83364aa2658e61d900eb0df9549f7"}, {"222": "dfe56c4a10e003bc049a0e5e197893cb2cc2556f"}, {"223": "dfe56c4a10e003bc049a0e5e197893cb2cc2556f"}, {"224": "dfe56c4a10e003bc049a0e5e197893cb2cc2556f"}, {"227": "013958c3839e7bd81946e2127686dd2b75f84729"}, {"228": "013958c3839e7bd81946e2127686dd2b75f84729"}], "ctags": [{"_type": "tag", "name": "ListsService", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^export const ListsService = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "ProgressService", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^export const ProgressService = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "RatingsService", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^export const RatingsService = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "TABLE_LISTS", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^const TABLE_LISTS = 'user_lists'; \\/\\/ verify: table name is user_lists (not users_lists)$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "TABLE_PROGRESS", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^const TABLE_PROGRESS = 'user_progress';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "TABLE_RATINGS", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^const TABLE_RATINGS = 'user_ratings';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "add", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^  async add({ media_id, media_type, list_name }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ media_id, media_type, list_name })", "scope": "ListsService", "scopeKind": "class"}, {"_type": "tag", "name": "formatSbError", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^function formatSbError(prefix, error, extra = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(prefix, error, extra = {})"}, {"_type": "tag", "name": "getCurrentUserId", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^async function getCurrentUserId() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "isAvailable", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^  async isAvailable() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "ProgressService", "scopeKind": "class"}, {"_type": "tag", "name": "loadAll", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^  async loadAll() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "RatingsService", "scopeKind": "class"}, {"_type": "tag", "name": "loadList", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^  async loadList(list_name) {$/", "language": "JavaScript", "kind": "method", "signature": "(list_name)", "scope": "ListsService", "scopeKind": "class"}, {"_type": "tag", "name": "remove", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^  async remove({ media_id, media_type }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ media_id, media_type })", "scope": "RatingsService", "scopeKind": "class"}, {"_type": "tag", "name": "remove", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^  async remove({ media_id, media_type, list_name }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ media_id, media_type, list_name })", "scope": "ListsService", "scopeKind": "class"}, {"_type": "tag", "name": "sb", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^    const sb = getSupabase();$/", "language": "JavaScript", "kind": "constant", "scope": "ProgressService", "scopeKind": "class"}, {"_type": "tag", "name": "upsert", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^  async upsert({ media_id, media_type, rating }) {$/", "language": "JavaScript", "kind": "method", "signature": "({ media_id, media_type, rating })", "scope": "RatingsService", "scopeKind": "class"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^      user_id, \\/\\/ explicitly include to satisfy RLS with check (auth.uid() = user_id)$/", "language": "JavaScript", "kind": "field", "scope": "RatingsService.upsert.payload", "scopeKind": "class"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/manga-and-anime-tracker-40880-41074/koma_corner_frontend/src/services/supabaseData.js", "pattern": "/^    const user_id = await getCurrentUserId();$/", "language": "JavaScript", "kind": "constant", "scope": "ProgressService", "scopeKind": "class"}], "hash": "afdf1ac854cb25595973e280e2ad34e6", "format-version": 4, "code-base-name": "koma_corner_frontend", "filename": "koma_corner_frontend/src/services/supabaseData.js", "fields": [{"name": "user_id, \\/\\/ explicitly include to satisfy RLS with check (auth.uid() = user_id)", "scope": "RatingsService.upsert.payload", "scopeKind": "class", "description": "unavailable"}]}